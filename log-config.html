<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF" data-link-color="#307FFF" data-content-max-width="1350" data-resizable-sidebar="true" data-sidebar-width="300"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-09-11T20:53:56.41853829"><title>日志配置 | Mind and Hand</title><script type="application/json" id="virtual-toc-data">[{"id":"logback","level":0,"title":"logback","anchor":"#logback"},{"id":"logback-spring-xml-v2-7","level":1,"title":"logback-spring.xml v2.7.+","anchor":"#logback-spring-xml-v2-7"},{"id":"logback-spring-xml-v3-3","level":1,"title":"logback-spring.xml v3.3.+","anchor":"#logback-spring-xml-v3-3"},{"id":"logback-xml","level":1,"title":"logback.xml","anchor":"#logback-xml"},{"id":"log4j-xml","level":0,"title":"log4j.xml","anchor":"#log4j-xml"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="日志配置 | Mind and Hand"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Mind and Hand Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/log-config.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="日志配置 | Mind and Hand"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/log-config.html#webpage",
    "url": "writerside-documentation/log-config.html",
    "name": "日志配置 | Mind and Hand",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Mind and Hand Help"
}</script><!-- End Schema.org --></head><body data-id="log-config" data-main-title="日志配置" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="develop.md|Develop///lang-java.md|Java"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Mind and Hand  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="log-config" id="log-config.md">日志配置</h1><section class="chapter"><h2 id="logback" data-toc="logback">logback</h2><section class="chapter"><h3 id="logback-spring-xml-v2-7" data-toc="logback-spring-xml-v2-7">logback-spring.xml v2.7.+</h3><p id="xk8c6x_9">spring-boot使用</p><div class="code-block" data-lang="markup">

&lt;configuration&gt;
    &lt;conversionRule conversionWord=&quot;clr&quot; converterClass=&quot;org.springframework.boot.logging.logback.ColorConverter&quot;/&gt;
    &lt;conversionRule conversionWord=&quot;wex&quot;
                    converterClass=&quot;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&quot;/&gt;
    &lt;conversionRule conversionWord=&quot;wEx&quot;
                    converterClass=&quot;org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter&quot;/&gt;

    &lt;!--  log cluster_config start  --&gt;
    &lt;property name=&quot;LOG_DATEFORMAT_PATTERN&quot; value=&quot;HH:mm:ss.SSS&quot;/&gt;
    &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot;
              value=&quot;%clr(%d{${LOG_DATEFORMAT_PATTERN:-HH:mm:ss.SSS}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr([%20.20t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}&quot;/&gt;

    &lt;property name=&quot;FILE_LOG_PATTERN&quot;
              value=&quot;%d{${LOG_DATEFORMAT_PATTERN:-HH:mm:ss.SSS}} ${LOG_LEVEL_PATTERN:-%5p} [%20.20t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&quot;/&gt;

    &lt;property name=&quot;CONSOLE_LOG_THRESHOLD&quot; value=&quot;DEBUG&quot;/&gt;
    &lt;property name=&quot;FILE_LOG_THRESHOLD&quot; value=&quot;DEBUG&quot;/&gt;
    &lt;!--  log cluster_config end  --&gt;

    &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot;
              value=&quot;${CONSOLE_LOG_PATTERN:-%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&quot;/&gt;
    &lt;property name=&quot;CONSOLE_LOG_CHARSET&quot; value=&quot;${CONSOLE_LOG_CHARSET:-${file.encoding:-UTF-8}}&quot;/&gt;
    &lt;property name=&quot;FILE_LOG_PATTERN&quot;
              value=&quot;${FILE_LOG_PATTERN:-%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}} ${LOG_LEVEL_PATTERN:-%5p} ${PID:- } --- [%t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&quot;/&gt;
    &lt;property name=&quot;FILE_LOG_CHARSET&quot; value=&quot;${FILE_LOG_CHARSET:-${file.encoding:-UTF-8}}&quot;/&gt;

    &lt;property name=&quot;CONSOLE_LOG_THRESHOLD&quot; value=&quot;${CONSOLE_LOG_THRESHOLD:-TRACE}&quot;/&gt;
    &lt;property name=&quot;FILE_LOG_THRESHOLD&quot; value=&quot;${FILE_LOG_THRESHOLD:-TRACE}&quot;/&gt;

    &lt;logger name=&quot;org.apache.catalina.startup.DigesterFactory&quot; level=&quot;ERROR&quot;/&gt;
    &lt;logger name=&quot;org.apache.catalina.util.LifecycleBase&quot; level=&quot;ERROR&quot;/&gt;
    &lt;logger name=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; level=&quot;WARN&quot;/&gt;
    &lt;logger name=&quot;org.apache.sshd.common.util.SecurityUtils&quot; level=&quot;WARN&quot;/&gt;
    &lt;logger name=&quot;org.apache.tomcat.util.net.NioSelectorPool&quot; level=&quot;WARN&quot;/&gt;
    &lt;logger name=&quot;org.eclipse.jetty.util.component.AbstractLifeCycle&quot; level=&quot;ERROR&quot;/&gt;
    &lt;logger name=&quot;org.hibernate.validator.internal.util.Version&quot; level=&quot;WARN&quot;/&gt;
    &lt;logger name=&quot;org.springframework.boot.actuate.endpoint.jmx&quot; level=&quot;WARN&quot;/&gt;

    &lt;!-- 读取Spring属性 --&gt;
    &lt;springProperty name=&quot;APP_NAME&quot; source=&quot;spring.application.name&quot; defaultValue=&quot;undefined&quot;/&gt;
    &lt;!-- 定义根目录 --&gt;
    &lt;property name=&quot;LOG_PATH&quot; value=&quot;./logs&quot;/&gt;

    &lt;!--    &lt;property name=&quot;LOG_FILE&quot; value=&quot;${LOG_FILE:-${LOG_PATH:-${LOG_TEMP:-${lan-java.io.tmpdir:-/tmp}}}/spring.log}&quot;/&gt;--&gt;
    &lt;property name=&quot;LOG_FILE&quot; value=&quot;${LOG_PATH}/${APP_NAME}.log&quot;/&gt;

    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
            &lt;level&gt;${CONSOLE_LOG_THRESHOLD}&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;
            &lt;charset&gt;${CONSOLE_LOG_CHARSET}&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
            &lt;level&gt;${FILE_LOG_THRESHOLD}&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;
            &lt;charset&gt;${FILE_LOG_CHARSET}&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;file&gt;${LOG_FILE}&lt;/file&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
            &lt;fileNamePattern&gt;
                ${LOGBACK_ROLLINGPOLICY_FILE_NAME_PATTERN:-${LOG_FILE}.%d{yyyy-MM-dd}.%i.gz}
            &lt;/fileNamePattern&gt;
            &lt;cleanHistoryOnStart&gt;${LOGBACK_ROLLINGPOLICY_CLEAN_HISTORY_ON_START:-false}&lt;/cleanHistoryOnStart&gt;
            &lt;maxFileSize&gt;${LOGBACK_ROLLINGPOLICY_MAX_FILE_SIZE:-10MB}&lt;/maxFileSize&gt;
            &lt;totalSizeCap&gt;${LOGBACK_ROLLINGPOLICY_TOTAL_SIZE_CAP:-0}&lt;/totalSizeCap&gt;
            &lt;maxHistory&gt;${LOGBACK_ROLLINGPOLICY_MAX_HISTORY:-7}&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
    &lt;/appender&gt;

    &lt;!--  error log file  --&gt;
    &lt;property name=&quot;ERROR_LOG_FILE&quot; value=&quot;${LOG_PATH}/${APP_NAME}-error.log&quot;/&gt;
    &lt;appender name=&quot;ERROR_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
            &lt;level&gt;ERROR&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;
            &lt;charset&gt;${FILE_LOG_CHARSET}&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;file&gt;${ERROR_LOG_FILE}&lt;/file&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
            &lt;fileNamePattern&gt;
                ${LOGBACK_ROLLINGPOLICY_FILE_NAME_PATTERN:-${ERROR_LOG_FILE}.%d{yyyy-MM-dd}.%i.gz}
            &lt;/fileNamePattern&gt;
            &lt;cleanHistoryOnStart&gt;${LOGBACK_ROLLINGPOLICY_CLEAN_HISTORY_ON_START:-false}&lt;/cleanHistoryOnStart&gt;
            &lt;maxFileSize&gt;${LOGBACK_ROLLINGPOLICY_MAX_FILE_SIZE:-10MB}&lt;/maxFileSize&gt;
            &lt;totalSizeCap&gt;${LOGBACK_ROLLINGPOLICY_TOTAL_SIZE_CAP:-0}&lt;/totalSizeCap&gt;
            &lt;maxHistory&gt;${LOGBACK_ROLLINGPOLICY_MAX_HISTORY:-7}&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
    &lt;/appender&gt;

    &lt;root level=&quot;INFO&quot;&gt;
        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;
        &lt;appender-ref ref=&quot;FILE&quot;/&gt;
        &lt;appender-ref ref=&quot;ERROR_FILE&quot;/&gt;
    &lt;/root&gt;

&lt;/configuration&gt;
</div></section><section class="chapter"><h3 id="logback-spring-xml-v3-3" data-toc="logback-spring-xml-v3-3">logback-spring.xml v3.3.+</h3><p id="xk8c6x_11">spring-boot使用</p><div class="code-block" data-lang="markup">

&lt;configuration&gt;
    &lt;conversionRule conversionWord=&quot;applicationName&quot;
                    class=&quot;org.springframework.boot.logging.logback.ApplicationNameConverter&quot;/&gt;
    &lt;conversionRule conversionWord=&quot;clr&quot; class=&quot;org.springframework.boot.logging.logback.ColorConverter&quot;/&gt;
    &lt;conversionRule conversionWord=&quot;correlationId&quot;
                    class=&quot;org.springframework.boot.logging.logback.CorrelationIdConverter&quot;/&gt;
    &lt;conversionRule conversionWord=&quot;wex&quot;
                    class=&quot;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&quot;/&gt;
    &lt;conversionRule conversionWord=&quot;wEx&quot;
                    class=&quot;org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter&quot;/&gt;

    &lt;!--  log cluster_config start  --&gt;
    &lt;property name=&quot;LOG_DATEFORMAT_PATTERN&quot; value=&quot;HH:mm:ss.SSS&quot;/&gt;
    &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot;
              value=&quot;%clr(%d{${LOG_DATEFORMAT_PATTERN:-HH:mm:ss.SSS}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr([%20.20t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}&quot;/&gt;

    &lt;property name=&quot;FILE_LOG_PATTERN&quot;
              value=&quot;%d{${LOG_DATEFORMAT_PATTERN:-HH:mm:ss.SSS}} ${LOG_LEVEL_PATTERN:-%5p} [%20.20t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&quot;/&gt;

    &lt;property name=&quot;CONSOLE_LOG_THRESHOLD&quot; value=&quot;DEBUG&quot;/&gt;
    &lt;property name=&quot;FILE_LOG_THRESHOLD&quot; value=&quot;DEBUG&quot;/&gt;
    &lt;!--  log cluster_config end  --&gt;

    &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot;
              value=&quot;${CONSOLE_LOG_PATTERN:-%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd'T'HH:mm:ss.SSSXXX}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr(%applicationName[%15.15t]){faint} %clr(${LOG_CORRELATION_PATTERN:-}){faint}%clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&quot;/&gt;
    &lt;property name=&quot;CONSOLE_LOG_CHARSET&quot; value=&quot;${CONSOLE_LOG_CHARSET:-${file.encoding:-UTF-8}}&quot;/&gt;
    &lt;property name=&quot;CONSOLE_LOG_THRESHOLD&quot; value=&quot;${CONSOLE_LOG_THRESHOLD:-TRACE}&quot;/&gt;
    &lt;property name=&quot;FILE_LOG_PATTERN&quot;
              value=&quot;${FILE_LOG_PATTERN:-%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd'T'HH:mm:ss.SSSXXX}} ${LOG_LEVEL_PATTERN:-%5p} ${PID:- } --- %applicationName[%t] ${LOG_CORRELATION_PATTERN:-}%-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&quot;/&gt;
    &lt;property name=&quot;FILE_LOG_CHARSET&quot; value=&quot;${FILE_LOG_CHARSET:-${file.encoding:-UTF-8}}&quot;/&gt;
    &lt;property name=&quot;FILE_LOG_THRESHOLD&quot; value=&quot;${FILE_LOG_THRESHOLD:-TRACE}&quot;/&gt;

    &lt;logger name=&quot;org.apache.catalina.startup.DigesterFactory&quot; level=&quot;ERROR&quot;/&gt;
    &lt;logger name=&quot;org.apache.catalina.util.LifecycleBase&quot; level=&quot;ERROR&quot;/&gt;
    &lt;logger name=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; level=&quot;WARN&quot;/&gt;
    &lt;logger name=&quot;org.apache.sshd.common.util.SecurityUtils&quot; level=&quot;WARN&quot;/&gt;
    &lt;logger name=&quot;org.apache.tomcat.util.net.NioSelectorPool&quot; level=&quot;WARN&quot;/&gt;
    &lt;logger name=&quot;org.eclipse.jetty.util.component.AbstractLifeCycle&quot; level=&quot;ERROR&quot;/&gt;
    &lt;logger name=&quot;org.hibernate.validator.internal.util.Version&quot; level=&quot;WARN&quot;/&gt;
    &lt;logger name=&quot;org.springframework.boot.actuate.endpoint.jmx&quot; level=&quot;WARN&quot;/&gt;

    &lt;!-- 读取Spring属性 --&gt;
    &lt;springProperty name=&quot;APP_NAME&quot; source=&quot;spring.application.name&quot; defaultValue=&quot;undefined&quot;/&gt;
    &lt;!-- 定义根目录 --&gt;
    &lt;property name=&quot;LOG_PATH&quot; value=&quot;./logs&quot;/&gt;

    &lt;!--    &lt;property name=&quot;LOG_FILE&quot; value=&quot;${LOG_FILE:-${LOG_PATH:-${LOG_TEMP:-${lan-java.io.tmpdir:-/tmp}}}/spring.log}&quot;/&gt;--&gt;
    &lt;property name=&quot;LOG_FILE&quot; value=&quot;${LOG_PATH}/${APP_NAME}.log&quot;/&gt;

    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
            &lt;level&gt;${CONSOLE_LOG_THRESHOLD}&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;
            &lt;charset&gt;${CONSOLE_LOG_CHARSET}&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
            &lt;level&gt;${FILE_LOG_THRESHOLD}&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;
            &lt;charset&gt;${FILE_LOG_CHARSET}&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;file&gt;${LOG_FILE}&lt;/file&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
            &lt;fileNamePattern&gt;
                ${LOGBACK_ROLLINGPOLICY_FILE_NAME_PATTERN:-${LOG_FILE}.%d{yyyy-MM-dd}.%i.gz}
            &lt;/fileNamePattern&gt;
            &lt;cleanHistoryOnStart&gt;${LOGBACK_ROLLINGPOLICY_CLEAN_HISTORY_ON_START:-false}&lt;/cleanHistoryOnStart&gt;
            &lt;maxFileSize&gt;${LOGBACK_ROLLINGPOLICY_MAX_FILE_SIZE:-10MB}&lt;/maxFileSize&gt;
            &lt;totalSizeCap&gt;${LOGBACK_ROLLINGPOLICY_TOTAL_SIZE_CAP:-0}&lt;/totalSizeCap&gt;
            &lt;maxHistory&gt;${LOGBACK_ROLLINGPOLICY_MAX_HISTORY:-7}&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
    &lt;/appender&gt;

    &lt;!--  error log file  --&gt;
    &lt;property name=&quot;ERROR_LOG_FILE&quot; value=&quot;${LOG_PATH}/${APP_NAME}-error.log&quot;/&gt;
    &lt;appender name=&quot;ERROR_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
            &lt;level&gt;ERROR&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;
            &lt;charset&gt;${FILE_LOG_CHARSET}&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;file&gt;${ERROR_LOG_FILE}&lt;/file&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
            &lt;fileNamePattern&gt;
                ${LOGBACK_ROLLINGPOLICY_FILE_NAME_PATTERN:-${ERROR_LOG_FILE}.%d{yyyy-MM-dd}.%i.gz}
            &lt;/fileNamePattern&gt;
            &lt;cleanHistoryOnStart&gt;${LOGBACK_ROLLINGPOLICY_CLEAN_HISTORY_ON_START:-false}&lt;/cleanHistoryOnStart&gt;
            &lt;maxFileSize&gt;${LOGBACK_ROLLINGPOLICY_MAX_FILE_SIZE:-10MB}&lt;/maxFileSize&gt;
            &lt;totalSizeCap&gt;${LOGBACK_ROLLINGPOLICY_TOTAL_SIZE_CAP:-0}&lt;/totalSizeCap&gt;
            &lt;maxHistory&gt;${LOGBACK_ROLLINGPOLICY_MAX_HISTORY:-7}&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
    &lt;/appender&gt;

    &lt;!--  mybatis log  start --&gt;
    &lt;!--    &lt;property name=&quot;MAPPER_LOG_FILE&quot; value=&quot;${LOG_PATH}/${APP_NAME}-mapper.log&quot;/&gt;--&gt;
    &lt;!--    &lt;appender name=&quot;MAPPER_LOG_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;--&gt;
    &lt;!--        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;--&gt;
    &lt;!--            &lt;level&gt;DEBUG&lt;/level&gt;--&gt;
    &lt;!--        &lt;/filter&gt;--&gt;
    &lt;!--        &lt;encoder&gt;--&gt;
    &lt;!--            &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;--&gt;
    &lt;!--            &lt;charset&gt;${FILE_LOG_CHARSET}&lt;/charset&gt;--&gt;
    &lt;!--        &lt;/encoder&gt;--&gt;
    &lt;!--        &lt;file&gt;${ERROR_LOG_FILE}&lt;/file&gt;--&gt;
    &lt;!--        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;--&gt;
    &lt;!--            &lt;fileNamePattern&gt;--&gt;
    &lt;!--                ${LOGBACK_ROLLINGPOLICY_FILE_NAME_PATTERN:-${ERROR_LOG_FILE}.%d{yyyy-MM-dd}.%i.gz}--&gt;
    &lt;!--            &lt;/fileNamePattern&gt;--&gt;
    &lt;!--            &lt;cleanHistoryOnStart&gt;${LOGBACK_ROLLINGPOLICY_CLEAN_HISTORY_ON_START:-false}&lt;/cleanHistoryOnStart&gt;--&gt;
    &lt;!--            &lt;maxFileSize&gt;${LOGBACK_ROLLINGPOLICY_MAX_FILE_SIZE:-10MB}&lt;/maxFileSize&gt;--&gt;
    &lt;!--            &lt;totalSizeCap&gt;${LOGBACK_ROLLINGPOLICY_TOTAL_SIZE_CAP:-0}&lt;/totalSizeCap&gt;--&gt;
    &lt;!--            &lt;maxHistory&gt;${LOGBACK_ROLLINGPOLICY_MAX_HISTORY:-7}&lt;/maxHistory&gt;--&gt;
    &lt;!--        &lt;/rollingPolicy&gt;--&gt;
    &lt;!--    &lt;/appender&gt;--&gt;

    &lt;!--    &lt;logger name=&quot;io.intellij.mapper&quot; level=&quot;DEBUG&quot; additivity=&quot;false&quot;&gt;--&gt;
    &lt;!--        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;--&gt;
    &lt;!--        &lt;appender-ref ref=&quot;MAPPER_LOG_FILE&quot;/&gt;--&gt;
    &lt;!--    &lt;/logger&gt;--&gt;
    &lt;!--  mybatis log end --&gt;

    &lt;root level=&quot;INFO&quot;&gt;
        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;
        &lt;appender-ref ref=&quot;FILE&quot;/&gt;
        &lt;appender-ref ref=&quot;ERROR_FILE&quot;/&gt;
    &lt;/root&gt;

&lt;/configuration&gt;
</div></section><section class="chapter"><h3 id="logback-xml" data-toc="logback-xml">logback.xml</h3><p id="xk8c6x_13">直接使用</p><div class="code-block" data-lang="markup">

&lt;configuration&gt;
    &lt;appender name=&quot;console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;
                %d{yyyy-MM-dd HH:mm:ss.SSS} %highlight(%-5level) [%15.15thread] %cyan(%-40.40logger{39}) : %msg%n
            &lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;appender name=&quot;file&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;file&gt;
            ./logs/application.log
        &lt;/file&gt;
        &lt;append&gt;true&lt;/append&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%15.15thread] %-40.40logger{39} : %msg%n&lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
            &lt;fileNamePattern&gt;
                ./logs/application-%d{yyyy-MM-dd}.%i.log
            &lt;/fileNamePattern&gt;
            &lt;maxHistory&gt;30&lt;/maxHistory&gt;
            &lt;maxFileSize&gt;20MB&lt;/maxFileSize&gt;
        &lt;/rollingPolicy&gt;
    &lt;/appender&gt;

    &lt;logger name=&quot;io.netty&quot; level=&quot;INFO&quot;/&gt;
    &lt;logger name=&quot;org.iproute&quot; level=&quot;INFO&quot;/&gt;

    &lt;root level=&quot;info&quot;&gt;
        &lt;appender-ref ref=&quot;console&quot;/&gt;
        &lt;appender-ref ref=&quot;file&quot;/&gt;
    &lt;/root&gt;

&lt;/configuration&gt;
</div></section></section><section class="chapter"><h2 id="log4j-xml" data-toc="log4j-xml">log4j.xml</h2><div class="code-block" data-lang="markup">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;WARN&quot;&gt;
    &lt;Properties&gt;
        &lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;
            &lt;!-- %d{yyyy-MM-dd HH:mm:ss.SSS} %highlight{%-5level}{ERROR=Bright RED, WARN=Bright Yellow, INFO=Bright Green, DEBUG=Bright Cyan, TRACE=Bright White} %style{[%15t]}{cyan} %style{%50c{1.}.%M(%L)}{blue}: %msg%n--&gt;
            &lt;!-- %d{yyyy-MM-dd HH:mm:ss.SSS} %highlight{%-5level} [%15.15t] %style{%-30.30logger{1.} (%-4L)}{cyan} : %msg%n--&gt;
            %d{yyyy-MM-dd HH:mm:ss.SSS} %highlight{%-5level} [%15.15t] %style{%-40.40logger{1.} (%-4L)}{cyan} : %msg%n
        &lt;/Property&gt;
    &lt;/Properties&gt;
    &lt;Appenders&gt;
        &lt;Console name=&quot;CONSOLE&quot; target=&quot;SYSTEM_OUT&quot;&gt;
            &lt;PatternLayout pattern=&quot;${CONSOLE_LOG_PATTERN}&quot; disableAnsi=&quot;false&quot;/&gt;
        &lt;/Console&gt;
    &lt;/Appenders&gt;
    &lt;Loggers&gt;
        &lt;Root level=&quot;trace&quot;&gt;
            &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt;
        &lt;/Root&gt;
    &lt;/Loggers&gt;
&lt;/Configuration&gt;
</div></section><div class="last-modified">11 September 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="lang-java.html" class="navigation-links__prev">Java</a><a href="dsl.html" class="navigation-links__next">DSL</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>